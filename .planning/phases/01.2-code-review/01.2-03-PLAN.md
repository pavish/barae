---
phase: 01.2-code-review
plan: 03
type: execute
wave: 2
depends_on: ["01.2-01", "01.2-02"]
files_modified:
  - .planning/phases/01.2-code-review/01.2-03-SHARED-SETTINGS-REVIEW.md
  - .planning/phases/01.2-code-review/01.2-REVIEW-REPORT.md
autonomous: false

must_haves:
  truths:
    - "Shared components reviewed for reusability and accessibility"
    - "Settings feature reviewed for security and form handling"
    - "Final consolidated report provides actionable recommendations"
    - "All 53 source files have been reviewed"
  artifacts:
    - path: ".planning/phases/01.2-code-review/01.2-REVIEW-REPORT.md"
      provides: "Consolidated code review report"
      contains: "## Executive Summary"
  key_links:
    - from: "frontend/src/shared/components"
      to: "frontend/src/features"
      via: "component usage patterns"
      pattern: "import.*shared/components"
---

<objective>
Review shared components and settings feature, then consolidate all findings into a final review report.

Purpose: Complete the code review with shared code analysis and produce an actionable summary report.
Output: Shared/settings review (01.2-03-SHARED-SETTINGS-REVIEW.md) + Final report (01.2-REVIEW-REPORT.md)
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01.2-code-review/01.2-RESEARCH.md
@.planning/phases/01.2-code-review/01.2-01-SUMMARY.md
@.planning/phases/01.2-code-review/01.2-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Shared Components & Settings Review</name>
  <files>
    frontend/src/shared/components/Button.tsx
    frontend/src/shared/components/Card.tsx
    frontend/src/shared/components/Input.tsx
    frontend/src/shared/components/Modal.tsx
    frontend/src/shared/components/ThemeToggle.tsx
    frontend/src/shared/components/index.ts
    frontend/src/shared/hooks/useTheme.ts
    frontend/src/features/settings/components/ProfileSection.tsx
    frontend/src/features/settings/components/SecuritySection.tsx
    frontend/src/features/settings/components/AppearanceSection.tsx
    frontend/src/features/settings/components/DangerZone.tsx
    frontend/src/features/settings/components/index.ts
    frontend/src/features/settings/pages/SettingsPage.tsx
    frontend/src/features/settings/schemas/settings.ts
  </files>
  <action>
Review shared components and settings feature:

1. **Shared UI Components** (Button, Card, Input, Modal):
   - Check prop interfaces (properly typed, sensible defaults)
   - Verify accessibility (ARIA, keyboard support, focus visible)
   - Check styling consistency (Tailwind patterns)
   - Verify component composition (flexibility vs complexity)

2. **Theme System** (ThemeToggle, useTheme):
   - Check theme persistence (localStorage)
   - Verify system preference detection
   - Check for flash of wrong theme on load
   - Verify no hydration mismatches

3. **Settings Feature**:
   - ProfileSection: Check name update form validation
   - SecuritySection: Check password change flow, verification requirements
   - AppearanceSection: Check theme selection
   - DangerZone: Check account deletion flow, confirmation required

4. **Settings Validation** (schemas/settings.ts):
   - Check validation rules match security requirements
   - Verify error messages are helpful

Document findings focusing on:
- Reusability (can components be used in Phase 2+?)
- Accessibility (keyboard, screen readers)
- Security (settings changes properly protected)

Create `.planning/phases/01.2-code-review/01.2-03-SHARED-SETTINGS-REVIEW.md` with findings.
  </action>
  <verify>
All 14 shared/settings files reviewed. Document created at `.planning/phases/01.2-code-review/01.2-03-SHARED-SETTINGS-REVIEW.md`.
  </verify>
  <done>
Shared components and settings feature reviewed with accessibility, reusability, and security assessed.
  </done>
</task>

<task type="auto">
  <name>Task 2: Consolidate Final Review Report</name>
  <files>.planning/phases/01.2-code-review/01.2-REVIEW-REPORT.md</files>
  <action>
Read the three review documents and create a consolidated final report:
- 01.2-01-BACKEND-REVIEW.md (backend findings)
- 01.2-02-FRONTEND-AUTH-REVIEW.md (frontend auth/dashboard findings)
- 01.2-03-SHARED-SETTINGS-REVIEW.md (shared/settings findings)

Create `.planning/phases/01.2-code-review/01.2-REVIEW-REPORT.md`:

```markdown
# Code Review Report: Phase 1.2

**Review Date:** {date}
**Scope:** Phase 1 (Foundation & Auth) codebase
**Total Files:** 53 source files (14 backend, 39 frontend)

## Executive Summary

{3-5 sentences summarizing overall code quality and key findings}

### Statistics

| Category | Files | Critical | Important | Minor |
|----------|-------|----------|-----------|-------|
| Backend | 14 | {n} | {n} | {n} |
| Frontend Auth | 25 | {n} | {n} | {n} |
| Shared/Settings | 14 | {n} | {n} | {n} |
| **Total** | **53** | **{n}** | **{n}** | **{n}** |

## Critical Issues

{List any security vulnerabilities or correctness bugs that need immediate attention}
{If none: "No critical issues identified."}

## Important Issues

{Architectural problems, missing error handling, etc. that should be addressed}

## Minor Issues

{Style, documentation, minor optimizations}

## Positive Observations

{Patterns that work well and should be continued}

## Security Assessment

### Authentication
{Summary of auth security: better-auth config, session handling}

### Data Handling
{How sensitive data is managed}

### Input Validation
{Backend and frontend validation patterns}

## Architecture Assessment

### Backend Patterns
{Plugin architecture, separation of concerns}

### Frontend Patterns
{Component structure, state management}

### Consistency
{How consistent are patterns across the codebase?}

## Recommendations

### Before Phase 2 (Blocking)

{Issues that should be fixed before continuing}

### During Phase 2 (Opportunistic)

{Things to improve as we build new features}

### Future Phases (Backlog)

{Technical debt to address eventually}

## Detailed Findings

See individual review documents:
- [Backend Review](./01.2-01-BACKEND-REVIEW.md)
- [Frontend Auth/Dashboard Review](./01.2-02-FRONTEND-AUTH-REVIEW.md)
- [Shared/Settings Review](./01.2-03-SHARED-SETTINGS-REVIEW.md)
```
  </action>
  <verify>
File `.planning/phases/01.2-code-review/01.2-REVIEW-REPORT.md` exists with:
- Executive summary
- Issue counts by category
- Security assessment
- Architecture assessment
- Prioritized recommendations
- Links to detailed review documents
  </verify>
  <done>
Consolidated review report created with all findings summarized, issues categorized, and recommendations prioritized.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete code review with detailed findings across 53 source files</what-built>
  <how-to-verify>
1. Read the consolidated report: `.planning/phases/01.2-code-review/01.2-REVIEW-REPORT.md`
2. Review the Executive Summary for accuracy
3. Check if Critical Issues section reflects your understanding of the codebase
4. Review Recommendations to see if priorities make sense
5. Optionally, spot-check individual review documents for thoroughness
  </how-to-verify>
  <resume-signal>Type "approved" if the review is satisfactory, or provide specific feedback on findings that need adjustment</resume-signal>
</task>

</tasks>

<verification>
- All 53 source files have been reviewed across the three plans
- Three detailed review documents exist (backend, frontend-auth, shared-settings)
- Final consolidated report exists at `.planning/phases/01.2-code-review/01.2-REVIEW-REPORT.md`
- Issues are categorized by severity (Critical, Important, Minor)
- Recommendations are prioritized by timing (Before Phase 2, During Phase 2, Future)
- User has approved the review findings
</verification>

<success_criteria>
1. All 14 shared/settings files reviewed
2. Consolidated report aggregates all 53 file reviews
3. Issue counts are accurate and reflect actual findings
4. Security assessment covers auth, data handling, validation
5. Recommendations are actionable and prioritized
6. User approves the review report
</success_criteria>

<output>
After completion, create `.planning/phases/01.2-code-review/01.2-03-SUMMARY.md`
</output>
