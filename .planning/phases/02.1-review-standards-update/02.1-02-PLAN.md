---
phase: 02.1-review-standards-update
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - backend/package.json
  - backend/eslint.config.js
  - backend/migrations/0000_orange_bloodaxe.sql
  - backend/migrations/0000_create_auth_tables.sql
  - backend/migrations/meta/_journal.json
autonomous: true

must_haves:
  truths:
    - "Backend has no unused dependencies in package.json"
    - "eslint-plugin-prettier is removed; only eslint-config-prettier remains"
    - "Migration file has a descriptive name following the naming convention"
    - "ESLint and Prettier still work correctly after changes"
  artifacts:
    - path: "backend/package.json"
      provides: "Clean dependency list with no unused packages"
      contains: "@fastify/type-provider-typebox"
    - path: "backend/eslint.config.js"
      provides: "ESLint config without eslint-plugin-prettier"
    - path: "backend/migrations/0000_create_auth_tables.sql"
      provides: "Renamed migration with descriptive name"
    - path: "backend/migrations/meta/_journal.json"
      provides: "Updated journal matching renamed migration"
  key_links:
    - from: "backend/migrations/meta/_journal.json"
      to: "backend/migrations/0000_create_auth_tables.sql"
      via: "tag field matches filename"
      pattern: "0000_create_auth_tables"
---

<objective>
Clean up backend dependencies, fix ESLint configuration, and rename the migration file to follow naming conventions.

Purpose: Remove unused pre-installed dependencies (dependency health standard), fix the eslint-plugin-prettier anti-pattern, and apply the migration naming convention. These are the simple, low-risk fixes identified during research.

Output: Clean backend package.json, correct ESLint config, properly named migration
</objective>

<execution_context>
@/Users/pavish/.claude/get-shit-done/workflows/execute-plan.md
@/Users/pavish/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02.1-review-standards-update/02.1-RESEARCH.md

@backend/package.json
@backend/eslint.config.js
@backend/migrations/meta/_journal.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove unused dependencies and eslint-plugin-prettier</name>
  <files>
    backend/package.json
    backend/eslint.config.js
  </files>
  <action>
    **Remove unused dependencies from `backend/package.json`:**

    From `dependencies`, remove:
    - `@fastify/autoload` — never imported, routes registered manually
    - `@fastify/cookie` — never imported, better-auth handles cookies internally via Web API headers
    - `@fastify/error` — never imported, future phase concern
    - `@fastify/rate-limit` — never imported, future phase concern
    - `@octokit/app` — never imported, Phase 4 concern
    - `@octokit/rest` — never imported, Phase 4 concern
    - `drizzle-typebox` — never imported, future use TBD
    - `fastify-raw-body` — never imported, Phase 4 webhook concern

    Keep `@sinclair/typebox` — it will be needed for `@fastify/env` schema definitions in Plan 03.

    From `devDependencies`, remove:
    - `drizzle-seed` — never used
    - `eslint-plugin-prettier` — anti-pattern, runs Prettier inside ESLint

    **Before removing `@fastify/cookie`:** Verify better-auth does not list it as a peer dependency:
    - Run: `cd backend && npm ls @fastify/cookie` to check if anything depends on it
    - Check: `cat node_modules/better-auth/package.json | grep -A5 peerDependencies` for any fastify deps
    - If better-auth needs it, keep it and document why

    **Update `backend/eslint.config.js`:**
    - The config currently does NOT import `eslint-plugin-prettier` (it only uses `eslint-config-prettier`), so no eslint.config.js changes are needed beyond verifying this is the case
    - Verify: the file should only import `eslint-config-prettier` (the config disabler), not `eslint-plugin-prettier` (the plugin runner)
    - If `eslint-plugin-prettier` IS imported, remove the import and any plugin/extends referencing it

    **Run after changes:**
    - `cd backend && npm install` to update package-lock.json
    - `cd backend && npx eslint . --max-warnings=0` to verify linting still works
    - `cd backend && npx prettier . --check` to verify formatting still works
  </action>
  <verify>
    - `grep -c "autoload\|@fastify/cookie\|@fastify/error\|@fastify/rate-limit\|@octokit\|drizzle-typebox\|fastify-raw-body\|drizzle-seed\|eslint-plugin-prettier" backend/package.json` returns 0
    - `cd backend && npx eslint . --max-warnings=0` passes
    - `cd backend && npx prettier . --check` passes
    - `grep "@sinclair/typebox" backend/package.json` still present (kept for @fastify/env)
  </verify>
  <done>
    All unused dependencies removed from backend. Only actively used packages remain. ESLint and Prettier still work correctly with eslint-config-prettier only (no eslint-plugin-prettier).
  </done>
</task>

<task type="auto">
  <name>Task 2: Rename migration file and update journal</name>
  <files>
    backend/migrations/0000_orange_bloodaxe.sql
    backend/migrations/0000_create_auth_tables.sql
    backend/migrations/meta/_journal.json
  </files>
  <action>
    **Rename the migration file:**
    - Rename `backend/migrations/0000_orange_bloodaxe.sql` to `backend/migrations/0000_create_auth_tables.sql`
    - Use: `mv backend/migrations/0000_orange_bloodaxe.sql backend/migrations/0000_create_auth_tables.sql`

    **Update the journal to match:**
    - Edit `backend/migrations/meta/_journal.json`
    - Change the `tag` field from `"0000_orange_bloodaxe"` to `"0000_create_auth_tables"`
    - Keep all other fields unchanged (idx, version, when, breakpoints)

    **Also check for snapshot references:**
    - Check `backend/migrations/meta/0000_snapshot.json` — if it exists and references the old name, update it too
    - Run: `ls backend/migrations/meta/` to see all meta files
    - Run: `grep -r "orange_bloodaxe" backend/migrations/meta/` to find any remaining references

    **Why this is safe:** This is early development with no production databases. All dev databases can be recreated via `docker compose down -v && docker compose up`.

    **Post-change verification:**
    - The content of the SQL file is unchanged — only the filename changes
    - The journal tag matches the new filename (without .sql extension)
  </action>
  <verify>
    - `ls backend/migrations/0000_create_auth_tables.sql` exists
    - `ls backend/migrations/0000_orange_bloodaxe.sql` does NOT exist (should fail)
    - `grep "0000_create_auth_tables" backend/migrations/meta/_journal.json` returns a match
    - `grep "orange_bloodaxe" backend/migrations/meta/_journal.json` returns no match
    - `grep -r "orange_bloodaxe" backend/migrations/meta/` returns no matches
  </verify>
  <done>
    Migration file renamed from random Drizzle default to descriptive `0000_create_auth_tables.sql`. Journal updated to match. No references to the old name remain.
  </done>
</task>

</tasks>

<verification>
1. `backend/package.json` has no unused dependencies (verify each removed dep is gone)
2. `eslint-plugin-prettier` is not in package.json or eslint.config.js
3. `eslint-config-prettier` IS still present (it's the correct approach)
4. Migration file has descriptive name and journal matches
5. `cd backend && npx eslint .` passes
6. `cd backend && npx prettier . --check` passes
7. `cd backend && npx tsc --noEmit` passes (no type errors from removed deps)
</verification>

<success_criteria>
- Zero unused dependencies in backend/package.json
- eslint-plugin-prettier fully removed, eslint-config-prettier retained
- Migration file renamed to 0000_create_auth_tables.sql with matching journal
- All lint/format/type checks pass
</success_criteria>

<output>
After completion, create `.planning/phases/02.1-review-standards-update/02.1-02-SUMMARY.md`
</output>
