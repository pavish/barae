---
phase: 02.1-review-standards-update
plan: 01
subsystem: infra
tags: [standards, documentation, fastify, react, typescript, docker, drizzle, eslint, prettier]

# Dependency graph
requires:
  - phase: 01-dev-environment
    provides: Backend and frontend project structure, Docker compose, Caddy proxy
  - phase: 02-auth-backend
    provides: better-auth integration, Drizzle schema, email transport, auth routes
provides:
  - 6 prescriptive standards documents covering backend, frontend, TypeScript, Docker, dependencies, migrations
  - CLAUDE.md project root entry point with critical rules and standards pointers
  - Updated STANDARDS.md with Standards Documents index and Project Conventions section
affects: [02.1-02, 02.1-03, 02.1-04, 03-dashboard-shell, 04-github-integration]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Standards-first approach: define standards before code review"
    - "Review-after-phase practice: review/standards phase after every execution phase"

key-files:
  created:
    - .planning/codebase/backend.md
    - .planning/codebase/frontend.md
    - .planning/codebase/typescript.md
    - .planning/codebase/docker.md
    - .planning/codebase/dependencies.md
    - .planning/codebase/migrations.md
    - CLAUDE.md
  modified:
    - .planning/codebase/STANDARDS.md

key-decisions:
  - "Standards documents describe TARGET state (post-refactor with @fastify/env, close-with-grace) to guide Plans 02 and 03 code fixes"
  - "Frontend scaffolded dependencies (react-router-dom, zustand, etc.) kept intentionally for Phase 3"
  - "Review-after-phase documented as user preference project convention, not workflow enforcement"
  - "CLAUDE.md kept concise (37 lines) as a pointer to .planning/codebase/, not a full standards doc"

patterns-established:
  - "Standards docs are prescriptive ('do X', 'never Y'), not advisory ('consider X')"
  - "Each standards doc is enforceable: every rule is something a reviewer can check for"
  - "CLAUDE.md at project root serves as entry point for Claude, referencing .planning/codebase/"

# Metrics
duration: 5min
completed: 2026-02-06
---

# Phase 2.1 Plan 01: Standards Documentation Summary

**7 prescriptive standards documents covering backend (Fastify plugins, @fastify/env config, auth, shutdown), frontend (React 19, shadcn/ui, TanStack Query), TypeScript (strict mode, no-any), Docker (compose, Caddy), dependencies (health audit, no pre-install), and migrations (naming, journal sync), plus CLAUDE.md project root entry point**

## Performance

- **Duration:** 5 min
- **Started:** 2026-02-05T20:38:10Z
- **Completed:** 2026-02-05T20:43:29Z
- **Tasks:** 2
- **Files modified:** 8

## Accomplishments

- Created 6 comprehensive standards documents in `.planning/codebase/` covering all established patterns from Phases 1 and 2
- Updated STANDARDS.md with Standards Documents index, corrected Backend Stack to reflect @fastify/env target, and added Project Conventions section
- Created CLAUDE.md at project root as concise entry point (37 lines) with critical rules, standards pointers, and skill references

## Task Commits

Each task was committed atomically:

1. **Task 1: Create backend, frontend, typescript, docker, dependencies, and migrations standards docs** - `d80d682` (docs)
2. **Task 2: Update STANDARDS.md and create CLAUDE.md** - `3e041dc` (docs)

**Plan metadata:** [pending] (docs: complete plan)

## Files Created/Modified

- `.planning/codebase/backend.md` - Backend standards: Fastify plugins, @fastify/env, db, auth, routes, error handling, graceful shutdown, logging (118 lines)
- `.planning/codebase/frontend.md` - Frontend standards: React 19, shadcn/ui, TanStack Query, apiFetch, auth client, state management (103 lines)
- `.planning/codebase/typescript.md` - TypeScript rules: very strict mode, no-any policy with checklist, ESLint+Prettier separation, import aliases (133 lines)
- `.planning/codebase/docker.md` - Docker standards: compose patterns, Caddy proxy, container naming, healthchecks, env management (78 lines)
- `.planning/codebase/dependencies.md` - Dependency policy: health verification, per-phase audit, no pre-install, @sinclair/typebox as direct dep (88 lines)
- `.planning/codebase/migrations.md` - Migration standards: naming convention, journal sync, schema array config, migration script workflow (73 lines)
- `.planning/codebase/STANDARDS.md` - Updated: added Standards Documents index, corrected config to @fastify/env, added Project Conventions section
- `CLAUDE.md` - Project root entry point with critical rules, standards pointers, skill references (37 lines)

## Decisions Made

- **Standards describe target state:** Documents like backend.md describe the POST-refactor patterns (e.g., @fastify/env, close-with-grace, plugin-scoped initialization) since they will guide the code fixes in Plans 02.1-02 and 02.1-03. This means current code does not yet match all standards.
- **Frontend scaffolded deps kept:** Packages like react-router-dom, zustand, zod are for Phase 3 (next execution phase). Documented as intentional in dependencies.md rather than removing and re-adding.
- **Review-after-phase as convention:** Documented in STANDARDS.md Project Conventions as a user preference for planning, not a workflow enforcement mechanism.
- **CLAUDE.md as pointer:** Kept concise (37 lines) with critical rules duplicated for visibility, but all detailed standards remain in `.planning/codebase/` topic docs.

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Standards documents are ready and serve as the review lens for Plan 02.1-02 (backend cleanup) and 02.1-03 (config refactor)
- CLAUDE.md is in place for all future Claude sessions
- Plan 02.1-04 (final sync) will update these docs to match actual code after refactoring

---
*Phase: 02.1-review-standards-update*
*Completed: 2026-02-06*
