# Phase 2.1: Review & Standards Update - Context

**Gathered:** 2026-02-05
**Status:** Ready for planning

<domain>
## Phase Boundary

Review all Phase 1 & 2 code for quality and consistency, fix all issues found, and create/update standards documentation in `.planning/codebase/`. Standards docs must be enforced on every future code change. This phase does NOT add new features — it audits, fixes, and documents.

</domain>

<decisions>
## Implementation Decisions

### Approach: Standards first, then review
- **Step 1:** Define standards — combine user's specific conventions + Claude's proposals (from fastify-best-practices and typescript-magician skills + codebase analysis)
- **Step 2:** Review all Phase 1 & 2 code against those standards + skills as guides
- **Step 3:** Fix everything found — no "log for later", all issues resolved in this phase

### User's specific standards (must be included)
- **Drizzle migrations:** Never use random names; always specify a proper descriptive name with standard number prefix
- **No `any` type:** Refer to typescript-magician skill for conditions and best practices around type safety
- **Prefer existing Fastify plugins:** Find well-maintained plugins instead of writing own implementations (e.g., `config.ts` could use `@fastify/env` or similar); consult fastify-best-practices skill and research before building custom
- **Dependency health:** Verify npm packages are well-maintained before adding them; high-level version choices (node, npm, postgres) are deferred to user
- **Per-phase discussion:** Chat with user for additional standards during each future phase's discussion

### Standards documentation
- Claude's discretion on file/category structure in `.planning/codebase/`
- Standards docs must be followed at every code change in this project
- Add concise references to CLAUDE.md pointing to the standards docs (not full rules in CLAUDE.md)

### Review guides
- Use **fastify-best-practices** skill as a review lens for all backend code
- Use **typescript-magician** skill as a review lens for TypeScript patterns and type safety
- Existing standards already in `.planning/STANDARDS.md` also apply

### Issue handling
- Fix everything found during review — no severity triage, no deferring
- Code changes + standards docs both happen in this phase

</decisions>

<specifics>
## Specific Ideas

- config.ts was called out as a candidate for replacement with a Fastify plugin (e.g., `@fastify/env`) — research and evaluate during review
- User wants to ensure best-maintained packages are used; check all current dependencies
- Standards should feel like enforced project rules, not optional guidelines

</specifics>

<deferred>
## Deferred Ideas

- **Review phase after every phase:** User wants a process rule that a review/standards phase is inserted after every execution phase and after full milestone completion. This should be documented as a project convention during this phase and added to ROADMAP.md conventions or `.claude/` instructions.

</deferred>

---

*Phase: 02.1-review-standards-update*
*Context gathered: 2026-02-05*
